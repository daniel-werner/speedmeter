/*******************************************************************************
    Daniel Verner
    vernerd@gmail.com
  *****************************************************************************/

#ifndef _KEYBOARD_
#define _KEYBOARD_

/*----------------------------------------------------------------------------*/
/* ### INCLUDES ### */

#include <types/types.h>
#include <setup/board.h>
#include <io/interrupt_device.h>

/*----------------------------------------------------------------------------*/

#ifdef  __cplusplus
extern "C" {
#endif

#ifdef _MSC_VER
#pragma unmanaged
#endif

/*----------------------------------------------------------------------------*/
/* ### FORWARD DECLARATIONS - BEGIN ### */
/*----------------------------------------------------------------------------*/

typedef struct Keyboard Keyboard;

/*----------------------------------------------------------------------------*/
/* ### FORWARD DECLARATIONS - END ### */
/*----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------*/
/* ### CONSTANTS AND TYPES - BEGIN ### */
/*----------------------------------------------------------------------------*/

typedef u8_t key_t;

#define KEY_NULL    0

#define KEY_DUMMY   0xFF
#define KEY_ESCAPE 	KEY_0
#define KEY_UP 		KEY_2
#define KEY_DOWN 	KEY_1
#define KEY_ENTER 	KEY_3

#define KEYBOARD_VECTOR PORT1_VECTOR

struct Keyboard {
	key_t* input;
	InterruptDevice* interruptDevice;
};

/*----------------------------------------------------------------------------*/
/* ### CONSTANTS AND TYPES - END ### */
/*----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------*/
/* ### FUNCTIONS - BEGIN ### */
/*----------------------------------------------------------------------------*/

void Keyboard_ctor( Keyboard* self );
key_t Keyboard_get_key( Keyboard* self );

/*----------------------------------------------------------------------------*/
/* ### FUNCTIONS - END ### */
/*----------------------------------------------------------------------------*/

#ifdef  __cplusplus
}
#endif

/*----------------------------------------------------------------------------*/

#endif
